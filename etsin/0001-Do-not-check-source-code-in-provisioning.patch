From 668af8abcde03bc90caf33353c63bbfbfa475300 Mon Sep 17 00:00:00 2001
From: Juhapekka Piiroinen <juhapekka.piiroinen@csc.fi>
Date: Sat, 14 Dec 2019 13:50:25 +0200
Subject: [PATCH] Do not check source code in provisioning

---
 .../roles/provision_search_app/tasks/main.yml  |  8 ++++----
 ansible/roles/provision_web_app/tasks/main.yml | 18 +++++++++---------
 2 files changed, 13 insertions(+), 13 deletions(-)

diff --git a/ansible/roles/provision_search_app/tasks/main.yml b/ansible/roles/provision_search_app/tasks/main.yml
index caa4f98..6670f9a 100644
--- a/ansible/roles/provision_search_app/tasks/main.yml
+++ b/ansible/roles/provision_search_app/tasks/main.yml
@@ -8,10 +8,10 @@
   - name: Create folder {{ search_app_base_path }} for the search app
     file: path={{ search_app_base_path }} state=directory owner={{ app_user }} group=etsin mode=0755
 
-  - name: Clone project repo from branch {{ search_app_github_repo_branch }} to {{ search_app_base_path }}
-    git: repo={{ search_app_github_repo }} dest={{ search_app_base_path }} version={{ search_app_github_repo_branch }}
-    become_user: "{{ app_user }}"
-    ignore_errors: yes
+#  - name: Clone project repo from branch {{ search_app_github_repo_branch }} to {{ search_app_base_path }}
+#    git: repo={{ search_app_github_repo }} dest={{ search_app_base_path }} version={{ search_app_github_repo_branch }}
+#    become_user: "{{ app_user }}"
+#    ignore_errors: yes
 
 #  - name: Update search app python package requirements to their latest versions
 #    shell: pur --force --requirement {{ search_app_base_path }}/requirements.txt
diff --git a/ansible/roles/provision_web_app/tasks/main.yml b/ansible/roles/provision_web_app/tasks/main.yml
index 20ad523..75dec79 100644
--- a/ansible/roles/provision_web_app/tasks/main.yml
+++ b/ansible/roles/provision_web_app/tasks/main.yml
@@ -10,10 +10,10 @@
   - name: Create folder {{ web_app_base_path }} for the web app
     file: path={{ web_app_base_path }} state=directory owner={{ app_user }} group=etsin mode=0755
 
-  - name: Clone project repo from branch {{ web_app_github_repo_branch }} to {{ web_app_base_path }}
-    git: repo={{ web_app_github_repo }} dest={{ web_app_base_path }} version={{ web_app_github_repo_branch }}
-    become_user: "{{ app_user }}"
-    ignore_errors: yes
+#  - name: Clone project repo from branch {{ web_app_github_repo_branch }} to {{ web_app_base_path }}
+#    git: repo={{ web_app_github_repo }} dest={{ web_app_base_path }} version={{ web_app_github_repo_branch }}
+#    become_user: "{{ app_user }}"
+#    ignore_errors: yes
 
 #  - name: Update app python package requirements to their latest versions
 #    shell: pur --force --requirement {{ web_app_base_path }}/requirements.txt
@@ -36,12 +36,12 @@
 
   - include_role: name=gunicorn
 
-  - name: Install NPM
-    yum: name=npm state=latest
+#  - name: Install NPM
+#    yum: name=npm state=latest
 
-  - name: Install npm-check-updates
-    npm: name=npm-check-updates state=latest global=yes
-    when: deployment_environment_id == 'local_development'
+#  - name: Install npm-check-updates
+#    npm: name=npm-check-updates state=latest global=yes
+#    when: deployment_environment_id == 'local_development'
 
   - include_role: name=frontend
 
-- 
2.21.0 (Apple Git-122.2)

